define(["exports","micromark-util-character","micromark-util-chunked","micromark-util-resolve-all"],(function(e,n,t,r){e.createTokenizer=function(e,u,i){let o=Object.assign(i?Object.assign({},i):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const s={},c=[];let l=[],f=[];const a={consume:function(e){n.markdownLineEnding(e)?(o.line++,o.column=1,o.offset+=-3===e?2:1,k()):-1!==e&&(o.column++,o.offset++);o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===l[o._index].length&&(o._bufferIndex=-1,o._index++));d.previous=e},enter:function(e,n){const t=n||{};return t.type=e,t.start=h(),d.events.push(["enter",t,d]),f.push(t),t},exit:function(e){const n=f.pop();return n.end=h(),d.events.push(["exit",n,d]),n},attempt:m((function(e,n){g(e,n.from)})),check:m(_),interrupt:m(_,{interrupt:!0})},d={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:v,sliceSerialize:function(e,n){return function(e,n){let t=-1;const r=[];let u;for(;++t<e.length;){const i=e[t];let o;if("string"==typeof i)o=i;else switch(i){case-5:o="\r";break;case-4:o="\n";break;case-3:o="\r\n";break;case-2:o=n?" ":"\t";break;case-1:if(!n&&u)continue;o=" ";break;default:o=String.fromCharCode(i)}u=-2===i,r.push(o)}return r.join("")}(v(e),n)},now:h,defineSkip:function(e){s[e.line]=e.column,k()},write:function(e){if(l=t.push(l,e),x(),null!==l[l.length-1])return[];return g(u,0),d.events=r.resolveAll(c,d.events,d),d.events}};let p=u.tokenize.call(d,a);return u.resolveAll&&c.push(u),d;function v(e){return function(e,n){const t=n.start._index,r=n.start._bufferIndex,u=n.end._index,i=n.end._bufferIndex;let o;t===u?o=[e[t].slice(r,i)]:(o=e.slice(t,u),r>-1&&(o[0]=o[0].slice(r)),i>0&&o.push(e[u].slice(0,i)));return o}(l,e)}function h(){return Object.assign({},o)}function x(){let e;for(;o._index<l.length;){const n=l[o._index];if("string"==typeof n)for(e=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===e&&o._bufferIndex<n.length;)b(n.charCodeAt(o._bufferIndex));else b(n)}}function b(e){p=p(e)}function _(e,n){n.restore()}function m(e,n){return function(t,r,u){let i,s,c,l;return Array.isArray(t)?p(t):"tokenize"in t?p([t]):function(e){return n;function n(n){const t=null!==n&&e[n],r=null!==n&&e.null;return p([...Array.isArray(t)?t:t?[t]:[],...Array.isArray(r)?r:r?[r]:[]])(n)}}(t);function p(e){return i=e,s=0,0===e.length?u:v(e[s])}function v(e){return function(t){l=function(){const e=h(),n=d.previous,t=d.currentConstruct,r=d.events.length,u=Array.from(f);return{restore:i,from:r};function i(){o=e,d.previous=n,d.currentConstruct=t,d.events.length=r,f=u,k()}}(),c=e,e.partial||(d.currentConstruct=e);if(e.name&&d.parser.constructs.disable.null.includes(e.name))return b();return e.tokenize.call(n?Object.assign(Object.create(d),n):d,a,x,b)(t)}}function x(n){return e(c,l),r}function b(e){return l.restore(),++s<i.length?v(i[s]):u}}}function g(e,n){e.resolveAll&&!c.includes(e)&&c.push(e),e.resolve&&t.splice(d.events,n,d.events.length-n,e.resolve(d.events.slice(n),d)),e.resolveTo&&(d.events=e.resolveTo(d.events,d))}function k(){o.line in s&&o.column<2&&(o.column=s[o.line],o.offset+=s[o.line]-1)}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=create-tokenizer.js.map

define(["exports","../extends","react","@material-ui/core/utils"],(function(e,t,n,r){function o(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var l=o(n);function i(e){return void 0!==e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function u(e={}){const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:r,matchFrom:o="any",stringify:l,trim:u=!1}=e;return(e,{inputValue:a,getOptionLabel:s})=>{let c=u?a.trim():a;n&&(c=c.toLowerCase()),t&&(c=i(c));const f=e.filter((e=>{let r=(l||s)(e);return n&&(r=r.toLowerCase()),t&&(r=i(r)),"start"===o?0===r.indexOf(c):r.indexOf(c)>-1}));return"number"==typeof r?f.slice(0,r):f}}function a(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const s=u();e.createFilterOptions=u,e.default=function(e){const{autoComplete:n=!1,autoHighlight:o=!1,autoSelect:i=!1,blurOnSelect:u=!1,clearOnBlur:c=!e.freeSolo,clearOnEscape:f=!1,componentName:p="useAutocomplete",debug:d=!1,defaultValue:g=(e.multiple?[]:null),disableClearable:h=!1,disableCloseOnSelect:b=!1,disabledItemsFocusable:v=!1,disableListWrap:m=!1,filterOptions:x=s,filterSelectedOptions:y=!1,freeSolo:O=!1,getOptionDisabled:k,getOptionLabel:C=(e=>e),getOptionSelected:S=((e,t)=>e===t),groupBy:w,handleHomeEndKeys:D=!e.freeSolo,id:E,includeInputInList:$=!1,inputValue:A,multiple:I=!1,onChange:T,onClose:N,onHighlightChange:P,onInputChange:L,onOpen:M,open:R,openOnFocus:H=!1,options:V,selectOnFocus:_=!e.freeSolo,value:j}=e,F=r.unstable_useId(E);let q=C;"production"!==process.env.NODE_ENV&&(q=e=>{const t=C(e);if("string"!=typeof t){const n=void 0===t?"undefined":`${typeof t} (${t})`;console.error(`Material-UI: The \`getOptionLabel\` method of ${p} returned ${n} instead of a string for ${JSON.stringify(e)}.`)}return t});const B=l.useRef(!1),U=l.useRef(!0),z=l.useRef(null),K=l.useRef(null),[J,Y]=l.useState(null),[W,G]=l.useState(-1),Q=o?0:-1,X=l.useRef(Q),[Z,ee]=r.useControlled({controlled:j,default:g,name:p}),[te,ne]=r.useControlled({controlled:A,default:"",name:p,state:"inputValue"}),[re,oe]=l.useState(!1),le=r.useEventCallback(((e,t)=>{let n;if(I)n="";else if(null==t)n="";else{const e=q(t);n="string"==typeof e?e:""}te!==n&&(ne(n),L&&L(e,n,"reset"))}));l.useEffect((()=>{le(null,Z)}),[Z,le]);const[ie,ue]=r.useControlled({controlled:R,default:!1,name:p,state:"open"}),ae=!I&&null!=Z&&te===q(Z),se=ie,ce=se?x(V.filter((e=>!y||!(I?Z:[Z]).some((t=>null!==t&&S(e,t))))),{inputValue:ae?"":te,getOptionLabel:q}):[];if("production"!==process.env.NODE_ENV&&null!==Z&&!O&&V.length>0){const e=(I?Z:[Z]).filter((e=>!V.some((t=>S(t,e)))));e.length>0&&console.warn([`Material-UI: The value provided to ${p} is invalid.`,`None of the options match with \`${e.length>1?JSON.stringify(e):JSON.stringify(e[0])}\`.`,"You can use the `getOptionSelected` prop to customize the equality test."].join("\n"))}const fe=r.useEventCallback((e=>{-1===e?z.current.focus():J.querySelector(`[data-tag-index="${e}"]`).focus()}));l.useEffect((()=>{I&&W>Z.length-1&&(G(-1),fe(-1))}),[Z,I,W,fe]);const pe=r.useEventCallback((({event:e,index:t,reason:n="auto"})=>{if(X.current=t,-1===t?z.current.removeAttribute("aria-activedescendant"):z.current.setAttribute("aria-activedescendant",`${F}-option-${t}`),P&&P(e,-1===t?null:ce[t],n),!K.current)return;const r=K.current.querySelector("[data-focus]");r&&r.removeAttribute("data-focus");const o=K.current.parentElement.querySelector('[role="listbox"]');if(!o)return;if(-1===t)return void(o.scrollTop=0);const l=K.current.querySelector(`[data-option-index="${t}"]`);if(l&&(l.setAttribute("data-focus","true"),o.scrollHeight>o.clientHeight&&"mouse"!==n)){const e=l,t=o.clientHeight+o.scrollTop,n=e.offsetTop+e.offsetHeight;n>t?o.scrollTop=n-o.clientHeight:e.offsetTop-e.offsetHeight*(w?1.3:0)<o.scrollTop&&(o.scrollTop=e.offsetTop-e.offsetHeight*(w?1.3:0))}})),de=r.useEventCallback((({event:e,diff:t,direction:r="next",reason:o="auto"})=>{if(!se)return;const l=function(e,t){if(!K.current||-1===e)return-1;let n=e;for(;;){if("next"===t&&n===ce.length||"previous"===t&&-1===n)return-1;const e=K.current.querySelector(`[data-option-index="${n}"]`),r=!v&&e&&(e.disabled||"true"===e.getAttribute("aria-disabled"));if(!(e&&!e.hasAttribute("tabindex")||r))return n;n+="next"===t?1:-1}}((()=>{const e=ce.length-1;if("reset"===t)return Q;if("start"===t)return 0;if("end"===t)return e;const n=X.current+t;return n<0?-1===n&&$?-1:m&&-1!==X.current||Math.abs(t)>1?0:e:n>e?n===e+1&&$?-1:m||Math.abs(t)>1?e:0:n})(),r);if(pe({index:l,reason:o,event:e}),n&&"reset"!==t)if(-1===l)z.current.value=te;else{const e=q(ce[l]);z.current.value=e;0===e.toLowerCase().indexOf(te.toLowerCase())&&te.length>0&&z.current.setSelectionRange(te.length,e.length)}})),ge=l.useCallback((()=>{if(!se)return;const e=I?Z[0]:Z;if(0!==ce.length&&null!=e){if(K.current)if(y||null==e)X.current>=ce.length-1?pe({index:ce.length-1}):pe({index:X.current});else{const t=ce[X.current];if(I&&t&&-1!==a(Z,(e=>S(t,e))))return;const n=a(ce,(t=>S(t,e)));-1===n?de({diff:"reset"}):pe({index:n})}}else de({diff:"reset"})}),[0===ce.length,!I&&Z,y,de,pe,se,te,I]),he=r.useEventCallback((e=>{r.setRef(K,e),e&&ge()}));l.useEffect((()=>{ge()}),[ge]);const be=e=>{ie||(ue(!0),M&&M(e))},ve=(e,t)=>{ie&&(ue(!1),N&&N(e,t))},me=(e,t,n,r)=>{Z!==t&&(T&&T(e,t,n,r),ee(t))},xe=l.useRef(!1),ye=(e,t,n="select-option",r="options")=>{let o=n,l=t;if(I){if(l=Array.isArray(Z)?Z.slice():[],"production"!==process.env.NODE_ENV){const e=l.filter((e=>S(t,e)));e.length>1&&console.error([`Material-UI: The \`getOptionSelected\` method of ${p} do not handle the arguments correctly.`,`The component expects a single value to match a given option but found ${e.length} matches.`].join("\n"))}const e=a(l,(e=>S(t,e)));-1===e?l.push(t):"freeSolo"!==r&&(l.splice(e,1),o="remove-option")}le(e,l),me(e,l,o,{option:t}),b||ve(e,o),(!0===u||"touch"===u&&xe.current||"mouse"===u&&!xe.current)&&z.current.blur()},Oe=(e,t)=>{if(!I)return;ve(e,"toggleInput");let n=W;-1===W?""===te&&"previous"===t&&(n=Z.length-1):(n+="next"===t?1:-1,n<0&&(n=0),n===Z.length&&(n=-1)),n=function(e,t){if(-1===e)return-1;let n=e;for(;;){if("next"===t&&n===Z.length||"previous"===t&&-1===n)return-1;const e=J.querySelector(`[data-tag-index="${n}"]`);if(!e||e.hasAttribute("tabindex")&&!e.disabled&&"true"!==e.getAttribute("aria-disabled"))return n;n+="next"===t?1:-1}}(n,t),G(n),fe(n)},ke=e=>{B.current=!0,ne(""),L&&L(e,"","clear"),me(e,I?[]:null,"clear")},Ce=e=>t=>{switch(-1!==W&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(G(-1),fe(-1)),t.key){case"Home":se&&D&&(t.preventDefault(),de({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":se&&D&&(t.preventDefault(),de({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),de({diff:-5,direction:"previous",reason:"keyboard",event:t}),be(t);break;case"PageDown":t.preventDefault(),de({diff:5,direction:"next",reason:"keyboard",event:t}),be(t);break;case"ArrowDown":t.preventDefault(),de({diff:1,direction:"next",reason:"keyboard",event:t}),be(t);break;case"ArrowUp":t.preventDefault(),de({diff:-1,direction:"previous",reason:"keyboard",event:t}),be(t);break;case"ArrowLeft":Oe(t,"previous");break;case"ArrowRight":Oe(t,"next");break;case"Enter":if(229===t.which)break;if(-1!==X.current&&se){const e=ce[X.current],r=!!k&&k(e);if(t.preventDefault(),r)return;ye(t,e,"select-option"),n&&z.current.setSelectionRange(z.current.value.length,z.current.value.length)}else O&&""!==te&&!1===ae&&(I&&t.preventDefault(),ye(t,te,"create-option","freeSolo"));break;case"Escape":se?(t.preventDefault(),t.stopPropagation(),ve(t,"escape")):f&&(""!==te||I&&Z.length>0)&&(t.preventDefault(),t.stopPropagation(),ke(t));break;case"Backspace":if(I&&""===te&&Z.length>0){const e=-1===W?Z.length-1:W,n=Z.slice();n.splice(e,1),me(t,n,"remove-option",{option:Z[e]})}}e.onKeyDown&&e.onKeyDown(t)},Se=e=>{oe(!0),H&&!B.current&&be(e)},we=e=>{null===K.current||document.activeElement!==K.current.parentElement?(oe(!1),U.current=!0,B.current=!1,d&&""!==te||(i&&-1!==X.current&&se?ye(e,ce[X.current],"blur"):i&&O&&""!==te?ye(e,te,"blur","freeSolo"):c&&le(e,Z),ve(e,"blur"))):z.current.focus()},De=e=>{const t=e.target.value;te!==t&&(ne(t),L&&L(e,t,"input")),""===t?h||I||me(e,null,"clear"):be(e)},Ee=e=>{pe({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},$e=()=>{xe.current=!0},Ae=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));ye(e,ce[t],"select-option"),xe.current=!1},Ie=e=>t=>{const n=Z.slice();n.splice(e,1),me(t,n,"remove-option",{option:Z[e]})},Te=e=>{ie?ve(e,"toggleInput"):be(e)},Ne=e=>{e.target.getAttribute("id")!==F&&e.preventDefault()},Pe=()=>{z.current.focus(),_&&U.current&&z.current.selectionEnd-z.current.selectionStart==0&&z.current.select(),U.current=!1},Le=e=>{""!==te&&ie||Te(e)};let Me=O&&te.length>0;Me=Me||(I?Z.length>0:null!==Z);let Re=ce;if(w){const e=new Map;let t=!1;Re=ce.reduce(((n,r,o)=>{const l=w(r);return n.length>0&&n[n.length-1].group===l?n[n.length-1].options.push(r):("production"!==process.env.NODE_ENV&&(e.get(l)&&!t&&(console.warn(`Material-UI: The options provided combined with the \`groupBy\` method of ${p} returns duplicated headers.`,"You can solve the issue by sorting the options with the output of `groupBy`."),t=!0),e.set(l,!0)),n.push({key:o,index:o,group:l,options:[r]})),n}),[])}return{getRootProps:(e={})=>t._extends({"aria-owns":se?`${F}-popup`:null,role:"combobox","aria-expanded":se},e,{onKeyDown:Ce(e),onMouseDown:Ne,onClick:Pe}),getInputLabelProps:()=>({id:`${F}-label`,htmlFor:F}),getInputProps:()=>({id:F,value:te,onBlur:we,onFocus:Se,onChange:De,onMouseDown:Le,"aria-activedescendant":se?"":null,"aria-autocomplete":n?"both":"list","aria-controls":se?`${F}-popup`:null,autoComplete:"off",ref:z,autoCapitalize:"none",spellCheck:"false"}),getClearProps:()=>({tabIndex:-1,onClick:ke}),getPopupIndicatorProps:()=>({tabIndex:-1,onClick:Te}),getTagProps:({index:e})=>({key:e,"data-tag-index":e,tabIndex:-1,onDelete:Ie(e)}),getListboxProps:()=>({role:"listbox",id:`${F}-popup`,"aria-labelledby":`${F}-label`,ref:he,onMouseDown:e=>{e.preventDefault()}}),getOptionProps:({index:e,option:t})=>{const n=(I?Z:[Z]).some((e=>null!=e&&S(t,e))),r=!!k&&k(t);return{key:e,tabIndex:-1,role:"option",id:`${F}-option-${e}`,onMouseOver:Ee,onClick:Ae,onTouchStart:$e,"data-option-index":e,"aria-disabled":r,"aria-selected":n}},id:F,inputValue:te,value:Z,dirty:Me,popupOpen:se,focused:re||-1!==W,anchorEl:J,setAnchorEl:Y,focusedTag:W,groupedOptions:Re}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=useAutocomplete.js.map

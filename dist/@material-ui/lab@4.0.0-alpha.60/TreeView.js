define(["exports","../extends","../objectWithoutPropertiesLoose","react","clsx","prop-types","@material-ui/core/styles","@material-ui/core/utils","./TreeView/TreeViewContext"],(function(e,t,r,n,c,l,u,a,d){function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var f=s(n),i=o(c),p=o(l);const h={root:{padding:0,margin:0,listStyle:"none"}};const x=(e,t,r)=>{for(let n=t;n<e.length;n+=1)if(r===e[n])return n;return-1},g=[],E=[],O=f.forwardRef((function(e,n){const{children:c,classes:l,className:u,defaultCollapseIcon:o,defaultEndIcon:s,defaultExpanded:p=g,defaultExpandIcon:h,defaultParentIcon:O,defaultSelected:b=E,disableSelection:N=!1,multiSelect:m=!1,expanded:y,onNodeSelect:S,onNodeToggle:I,selected:C}=e,T=r._objectWithoutPropertiesLoose(e,["children","classes","className","defaultCollapseIcon","defaultEndIcon","defaultExpanded","defaultExpandIcon","defaultParentIcon","defaultSelected","disableSelection","multiSelect","expanded","onNodeSelect","onNodeToggle","selected"]),[P,_]=f.useState(null),[j,v]=f.useState(null),w=f.useRef({}),R=f.useRef({}),k=f.useRef([]),[M,V]=a.useControlled({controlled:y,default:p,name:"TreeView",state:"expanded"}),[A,F]=a.useControlled({controlled:C,default:b,name:"TreeView",state:"selected"}),L=f.useCallback((e=>!!Array.isArray(M)&&-1!==M.indexOf(e)),[M]),D=f.useCallback((e=>Array.isArray(A)?-1!==A.indexOf(e):A===e),[A]),W=e=>{const t=k.current.indexOf(e);return-1!==t&&t+1<k.current.length?k.current[t+1]:null},z=e=>{const t=k.current.indexOf(e);return-1!==t&&t-1>=0?k.current[t-1]:null},B=()=>k.current[k.current.length-1],q=()=>k.current[0],G=e=>{e&&(_(e),v(e))},H=f.useRef(null),J=f.useRef(!1),K=f.useRef([]),Q=(e,t)=>{let r=A;const{start:n,end:c}=t;J.current&&(r=A.filter((e=>-1===K.current.indexOf(e))));const l=((e,t)=>{const r=k.current.indexOf(e),n=k.current.indexOf(t),c=Math.min(r,n),l=Math.max(r,n);return k.current.slice(c,l+1)})(n,c);K.current=l;let u=r.concat(l);u=u.filter(((e,t)=>u.indexOf(e)===t)),S&&S(e,u),F(u)},U=(e,t,r=!1)=>{const{start:n=H.current,end:c,current:l}=t;return r?((e,t)=>{let r=A;const{start:n,next:c,current:l}=t;c&&l&&(-1===K.current.indexOf(l)&&(K.current=[]),J.current?-1!==K.current.indexOf(c)?(r=r.filter((e=>e===n||e!==l)),K.current=K.current.filter((e=>e===n||e!==l))):(r.push(c),K.current.push(c)):(r.push(c),K.current.push(l,c)),S&&S(e,r),F(r))})(e,{start:n,next:c,current:l}):Q(e,{start:n,end:c}),J.current=!0,!0},X=f.useCallback((e=>{const t=w.current[e],r=[];return t&&(r.push(e),t.children&&(r.concat(t.children),t.children.forEach((e=>{r.concat(X(e))})))),r}),[]),Y=f.useCallback((e=>{const r=t._extends({},R.current);e.forEach((e=>{r[e]&&delete r[e]})),R.current=r}),[]),Z=f.useCallback((e=>{const r=X(e);Y(r);const n=t._extends({},w.current);r.forEach((e=>{const r=n[e];if(r){if(r.parent){const c=n[r.parent];if(c&&c.children){const l=c.children.filter((t=>t!==e));n[r.parent]=t._extends({},c,{children:l})}}delete n[e]}})),w.current=n,v((t=>t===e?null:t))}),[X,Y]),$=f.useRef([]),[ee,te]=f.useState(!1);f.useEffect((()=>{const e=[];f.Children.forEach(c,(t=>{f.isValidElement(t)&&t.props.nodeId&&e.push(t.props.nodeId)})),function(e,t){if(e.length!==t.length)return!0;for(let r=0;r<e.length;r+=1)if(e[r]!==t[r])return!0;return!1}($.current,e)&&(w.current[-1]={parent:null,children:e},e.forEach(((e,t)=>{0===t&&_(e)})),k.current=w.current[-1].children,$.current=e,te(!0))}),[c]),f.useEffect((()=>{const e=t=>{let r=[];for(let n=0;n<t.length;n+=1){const c=t[n];r.push(c);const l=w.current[c].children;L(c)&&l&&(r=r.concat(e(l)))}return r};ee&&(k.current=e(w.current[-1].children))}),[M,ee,L,c]);const re=()=>!1;return f.createElement(d.Provider,{value:{icons:{defaultCollapseIcon:o,defaultExpandIcon:h,defaultParentIcon:O,defaultEndIcon:s},focus:G,focusFirstNode:()=>G(q()),focusLastNode:()=>G(B()),focusNextNode:e=>G(W(e)),focusPreviousNode:e=>G(z(e)),focusByFirstCharacter:(e,t)=>{let r,n;const c=t.toLowerCase(),l=[],u=[];Object.keys(R.current).forEach((e=>{const t=R.current[e],r=w.current[e];(!r.parent||L(r.parent))&&(l.push(e),u.push(t))})),r=l.indexOf(e)+1,r===w.current.length&&(r=0),n=x(u,r,c),-1===n&&(n=x(u,0,c)),n>-1&&G(l[n])},expandAllSiblings:(e,t)=>{const r=w.current[t],n=w.current[r.parent];let c;if(n)c=n.children.filter((e=>!L(e)));else{c=w.current[-1].children.filter((e=>!L(e)))}const l=M.concat(c);c.length>0&&(V(l),I&&I(e,l))},toggleExpansion:(e,t=j)=>{let r;-1!==M.indexOf(t)?(r=M.filter((e=>e!==t)),_((e=>{const r=w.current[e];return e&&(r&&r.parent?r.parent.id:null)===t?t:e}))):r=[t].concat(M),I&&I(e,r),V(r)},isExpanded:L,isFocused:e=>j===e,isSelected:D,selectNode:N?re:(e,t,r=!1)=>!!t&&(r?((e,t)=>{let r=[];r=-1!==A.indexOf(t)?A.filter((e=>e!==t)):[t].concat(A),S&&S(e,r),F(r)})(e,t):((e,t)=>{const r=m?[t]:t;S&&S(e,r),F(r)})(e,t),H.current=t,J.current=!1,K.current=[],!0),selectRange:N?re:U,selectNextNode:N?re:(e,t)=>U(e,{end:W(t),current:t},!0),selectPreviousNode:N?re:(e,t)=>U(e,{end:z(t),current:t},!0),rangeSelectToFirst:N?re:(e,t)=>{H.current||(H.current=t);const r=J.current?H.current:t;return U(e,{start:r,end:q()})},rangeSelectToLast:N?re:(e,t)=>{H.current||(H.current=t);const r=J.current?H.current:t;return U(e,{start:r,end:B()})},selectAllNodes:N?re:e=>U(e,{start:q(),end:B()}),isTabbable:e=>P===e,multiSelect:m,getParent:e=>w.current[e].parent,mapFirstChar:(e,t)=>{R.current[e]=t},addNodeToNodeMap:(e,r)=>{const n=w.current[e];w.current[e]=t._extends({},n,{children:r,id:e}),r.forEach((r=>{const n=w.current[r];w.current[r]=t._extends({},n,{parent:e,id:r})}))},removeNodeFromNodeMap:Z}},f.createElement("ul",t._extends({role:"tree","aria-multiselectable":m,className:i.default(l.root,u),ref:n},T),c))}));"production"!==process.env.NODE_ENV&&(O.propTypes={children:p.default.node,classes:p.default.object,className:p.default.string,defaultCollapseIcon:p.default.node,defaultEndIcon:p.default.node,defaultExpanded:p.default.arrayOf(p.default.string),defaultExpandIcon:p.default.node,defaultParentIcon:p.default.node,defaultSelected:p.default.oneOfType([p.default.arrayOf(p.default.string),p.default.string]),disableSelection:p.default.bool,expanded:p.default.arrayOf(p.default.string),multiSelect:p.default.bool,onNodeSelect:p.default.func,onNodeToggle:p.default.func,selected:p.default.oneOfType([p.default.arrayOf(p.default.string),p.default.string])});var b=u.withStyles(h,{name:"MuiTreeView"})(O);e.default=b,e.styles=h,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=TreeView.js.map

{"version":3,"file":"makeStyles.js","sources":["../../../node_modules/@material-ui/styles/es/makeStyles/makeStyles.js"],"sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from 'react';\nimport { getDynamicStyles } from 'jss';\nimport mergeClasses from '../mergeClasses';\nimport multiKeyStore from './multiKeyStore';\nimport useTheme from '../useTheme';\nimport { StylesContext } from '../StylesProvider';\nimport { increment } from './indexCounter';\nimport getStylesCreator from '../getStylesCreator';\nimport noopTheme from '../getStylesCreator/noopTheme';\n\nfunction getClasses({\n  state,\n  stylesOptions\n}, classes, Component) {\n  if (stylesOptions.disableGeneration) {\n    return classes || {};\n  }\n\n  if (!state.cacheClasses) {\n    state.cacheClasses = {\n      // Cache for the finalized classes value.\n      value: null,\n      // Cache for the last used classes prop pointer.\n      lastProp: null,\n      // Cache for the last used rendered classes pointer.\n      lastJSS: {}\n    };\n  } // Tracks if either the rendered classes or classes prop has changed,\n  // requiring the generation of a new finalized classes object.\n\n\n  let generate = false;\n\n  if (state.classes !== state.cacheClasses.lastJSS) {\n    state.cacheClasses.lastJSS = state.classes;\n    generate = true;\n  }\n\n  if (classes !== state.cacheClasses.lastProp) {\n    state.cacheClasses.lastProp = classes;\n    generate = true;\n  }\n\n  if (generate) {\n    state.cacheClasses.value = mergeClasses({\n      baseClasses: state.cacheClasses.lastJSS,\n      newClasses: classes,\n      Component\n    });\n  }\n\n  return state.cacheClasses.value;\n}\n\nfunction attach({\n  state,\n  theme,\n  stylesOptions,\n  stylesCreator,\n  name\n}, props) {\n  if (stylesOptions.disableGeneration) {\n    return;\n  }\n\n  let sheetManager = multiKeyStore.get(stylesOptions.sheetsManager, stylesCreator, theme);\n\n  if (!sheetManager) {\n    sheetManager = {\n      refs: 0,\n      staticSheet: null,\n      dynamicStyles: null\n    };\n    multiKeyStore.set(stylesOptions.sheetsManager, stylesCreator, theme, sheetManager);\n  }\n\n  const options = _extends({}, stylesCreator.options, stylesOptions, {\n    theme,\n    flip: typeof stylesOptions.flip === 'boolean' ? stylesOptions.flip : theme.direction === 'rtl'\n  });\n\n  options.generateId = options.serverGenerateClassName || options.generateClassName;\n  const sheetsRegistry = stylesOptions.sheetsRegistry;\n\n  if (sheetManager.refs === 0) {\n    let staticSheet;\n\n    if (stylesOptions.sheetsCache) {\n      staticSheet = multiKeyStore.get(stylesOptions.sheetsCache, stylesCreator, theme);\n    }\n\n    const styles = stylesCreator.create(theme, name);\n\n    if (!staticSheet) {\n      staticSheet = stylesOptions.jss.createStyleSheet(styles, _extends({\n        link: false\n      }, options));\n      staticSheet.attach();\n\n      if (stylesOptions.sheetsCache) {\n        multiKeyStore.set(stylesOptions.sheetsCache, stylesCreator, theme, staticSheet);\n      }\n    }\n\n    if (sheetsRegistry) {\n      sheetsRegistry.add(staticSheet);\n    }\n\n    sheetManager.staticSheet = staticSheet;\n    sheetManager.dynamicStyles = getDynamicStyles(styles);\n  }\n\n  if (sheetManager.dynamicStyles) {\n    const dynamicSheet = stylesOptions.jss.createStyleSheet(sheetManager.dynamicStyles, _extends({\n      link: true\n    }, options));\n    dynamicSheet.update(props);\n    dynamicSheet.attach();\n    state.dynamicSheet = dynamicSheet;\n    state.classes = mergeClasses({\n      baseClasses: sheetManager.staticSheet.classes,\n      newClasses: dynamicSheet.classes\n    });\n\n    if (sheetsRegistry) {\n      sheetsRegistry.add(dynamicSheet);\n    }\n  } else {\n    state.classes = sheetManager.staticSheet.classes;\n  }\n\n  sheetManager.refs += 1;\n}\n\nfunction update({\n  state\n}, props) {\n  if (state.dynamicSheet) {\n    state.dynamicSheet.update(props);\n  }\n}\n\nfunction detach({\n  state,\n  theme,\n  stylesOptions,\n  stylesCreator\n}) {\n  if (stylesOptions.disableGeneration) {\n    return;\n  }\n\n  const sheetManager = multiKeyStore.get(stylesOptions.sheetsManager, stylesCreator, theme);\n  sheetManager.refs -= 1;\n  const sheetsRegistry = stylesOptions.sheetsRegistry;\n\n  if (sheetManager.refs === 0) {\n    multiKeyStore.delete(stylesOptions.sheetsManager, stylesCreator, theme);\n    stylesOptions.jss.removeStyleSheet(sheetManager.staticSheet);\n\n    if (sheetsRegistry) {\n      sheetsRegistry.remove(sheetManager.staticSheet);\n    }\n  }\n\n  if (state.dynamicSheet) {\n    stylesOptions.jss.removeStyleSheet(state.dynamicSheet);\n\n    if (sheetsRegistry) {\n      sheetsRegistry.remove(state.dynamicSheet);\n    }\n  }\n}\n\nfunction useSynchronousEffect(func, values) {\n  const key = React.useRef([]);\n  let output; // Store \"generation\" key. Just returns a new object every time\n\n  const currentKey = React.useMemo(() => ({}), values); // eslint-disable-line react-hooks/exhaustive-deps\n  // \"the first render\", or \"memo dropped the value\"\n\n  if (key.current !== currentKey) {\n    key.current = currentKey;\n    output = func();\n  }\n\n  React.useEffect(() => () => {\n    if (output) {\n      output();\n    }\n  }, [currentKey] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n}\n\nexport default function makeStyles(stylesOrCreator, options = {}) {\n  const {\n    // alias for classNamePrefix, if provided will listen to theme (required for theme.overrides)\n    name,\n    // Help with debuggability.\n    classNamePrefix: classNamePrefixOption,\n    Component,\n    defaultTheme = noopTheme\n  } = options,\n        stylesOptions2 = _objectWithoutPropertiesLoose(options, [\"name\", \"classNamePrefix\", \"Component\", \"defaultTheme\"]);\n\n  const stylesCreator = getStylesCreator(stylesOrCreator);\n  const classNamePrefix = name || classNamePrefixOption || 'makeStyles';\n  stylesCreator.options = {\n    index: increment(),\n    name,\n    meta: classNamePrefix,\n    classNamePrefix\n  };\n\n  const useStyles = (props = {}) => {\n    const theme = useTheme() || defaultTheme;\n\n    const stylesOptions = _extends({}, React.useContext(StylesContext), stylesOptions2);\n\n    const instance = React.useRef();\n    const shouldUpdate = React.useRef();\n    useSynchronousEffect(() => {\n      const current = {\n        name,\n        state: {},\n        stylesCreator,\n        stylesOptions,\n        theme\n      };\n      attach(current, props);\n      shouldUpdate.current = false;\n      instance.current = current;\n      return () => {\n        detach(current);\n      };\n    }, [theme, stylesCreator]);\n    React.useEffect(() => {\n      if (shouldUpdate.current) {\n        update(instance.current, props);\n      }\n\n      shouldUpdate.current = true;\n    });\n    const classes = getClasses(instance.current, props.classes, Component);\n\n    if (process.env.NODE_ENV !== 'production') {\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      React.useDebugValue(classes);\n    }\n\n    return classes;\n  };\n\n  return useStyles;\n}"],"names":["stylesOrCreator","options","name","classNamePrefix","classNamePrefixOption","Component","defaultTheme","noopTheme","stylesOptions2","_objectWithoutPropertiesLoose","stylesCreator","getStylesCreator","index","increment","meta","props","theme","useTheme","stylesOptions","_extends","React","useContext","StylesContext","instance","useRef","shouldUpdate","func","values","key","output","currentKey","useMemo","current","useEffect","useSynchronousEffect","state","disableGeneration","sheetManager","multiKeyStore","get","sheetsManager","refs","staticSheet","dynamicStyles","set","flip","direction","generateId","serverGenerateClassName","generateClassName","sheetsRegistry","sheetsCache","styles","create","jss","createStyleSheet","link","attach","add","getDynamicStyles","dynamicSheet","update","classes","mergeClasses","baseClasses","newClasses","delete","removeStyleSheet","remove","detach","cacheClasses","value","lastProp","lastJSS","generate","getClasses","process","env","NODE_ENV","useDebugValue"],"mappings":"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"}
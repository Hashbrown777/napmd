define(["../extends","../objectWithoutPropertiesLoose","react","prop-types","./utils/debounce","./utils/useForkRef","./utils/deprecatedPropType","./utils/setRef"],(function(e,t,r,n,o,a,s,u){function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var d=i(r),f=l(n);function c(e,t){return parseInt(e[t],10)||0}const p="undefined"!=typeof window?d.useLayoutEffect:d.useEffect,w={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},m=d.forwardRef((function(r,n){const{onChange:s,rows:u,rowsMax:l,rowsMin:i,maxRows:f,minRows:m=1,style:b,value:h}=r,y=t._objectWithoutPropertiesLoose(r,["onChange","rows","rowsMax","rowsMin","maxRows","minRows","style","value"]),g=f||l,v=u||i||m,{current:x}=d.useRef(null!=h),O=d.useRef(null),R=a(n,O),E=d.useRef(null),M=d.useRef(0),[T,j]=d.useState({}),N=d.useCallback((()=>{const e=O.current,t=window.getComputedStyle(e),n=E.current;n.style.width=t.width,n.value=e.value||r.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");const o=t["box-sizing"],a=c(t,"padding-bottom")+c(t,"padding-top"),s=c(t,"border-bottom-width")+c(t,"border-top-width"),u=n.scrollHeight-a;n.value="x";const l=n.scrollHeight-a;let i=u;v&&(i=Math.max(Number(v)*l,i)),g&&(i=Math.min(Number(g)*l,i)),i=Math.max(i,l);const d=i+("border-box"===o?a+s:0),f=Math.abs(i-u)<=1;j((e=>M.current<20&&(d>0&&Math.abs((e.outerHeightStyle||0)-d)>1||e.overflow!==f)?(M.current+=1,{overflow:f,outerHeightStyle:d}):("production"!==process.env.NODE_ENV&&20===M.current&&console.error(["Material-UI: Too many re-renders. The layout is unstable.","TextareaAutosize limits the number of renders to prevent an infinite loop."].join("\n")),e)))}),[g,v,r.placeholder]);d.useEffect((()=>{const e=o((()=>{M.current=0,N()}));return window.addEventListener("resize",e),()=>{e.clear(),window.removeEventListener("resize",e)}}),[N]),p((()=>{N()})),d.useEffect((()=>{M.current=0}),[h]);return d.createElement(d.Fragment,null,d.createElement("textarea",e._extends({value:h,onChange:e=>{M.current=0,x||N(),s&&s(e)},ref:R,rows:v,style:e._extends({height:T.outerHeightStyle,overflow:T.overflow?"hidden":null},b)},y)),d.createElement("textarea",{"aria-hidden":!0,className:r.className,readOnly:!0,ref:E,tabIndex:-1,style:e._extends({},w,b)}))}));return"production"!==process.env.NODE_ENV&&(m.propTypes={className:f.default.string,maxRows:f.default.oneOfType([f.default.number,f.default.string]),minRows:f.default.oneOfType([f.default.number,f.default.string]),onChange:f.default.func,placeholder:f.default.string,rows:s(f.default.oneOfType([f.default.number,f.default.string]),"Use `minRows` instead."),rowsMax:s(f.default.oneOfType([f.default.number,f.default.string]),"Use `maxRows` instead."),rowsMin:s(f.default.oneOfType([f.default.number,f.default.string]),"Use `minRows` instead."),style:f.default.object,value:f.default.oneOfType([f.default.arrayOf(f.default.string),f.default.number,f.default.string])}),m}));
//# sourceMappingURL=TextareaAutosize.js.map

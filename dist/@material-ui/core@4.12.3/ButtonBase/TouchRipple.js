define(["exports","../../extends","../../objectWithoutPropertiesLoose","react","prop-types","react-transition-group","clsx","../styles/withStyles","./Ripple","@material-ui/styles","../styles/defaultTheme","../styles/createTheme","@material-ui/utils","../styles/createBreakpoints","../styles/createMixins","../styles/createPalette","../colors/common","../colors/grey","../colors/indigo","../colors/pink","../colors/red","../colors/orange","../colors/blue","../colors/green","../styles/colorManipulator","../styles/createTypography","../styles/shadows","../styles/shape","../styles/createSpacing","@material-ui/system","../styles/transitions","../styles/zIndex","../utils/useEventCallback"],(function(e,t,r,s,n,l,a,o,i,c,u,p,f,d,m,h,y,b,g,k,M,R,v,E,x,O,j,w,P,T,C,_,z){function I(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var X=S(s),Y=I(n),$=I(a);const N=e=>({root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:`$enter 550ms ${e.transitions.easing.easeInOut}`},ripplePulsate:{animationDuration:`${e.transitions.duration.shorter}ms`},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:`$exit 550ms ${e.transitions.easing.easeInOut}`},childPulsate:{position:"absolute",left:0,top:0,animation:`$pulsate 2500ms ${e.transitions.easing.easeInOut} 200ms infinite`},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}),L=X.forwardRef((function(e,s){const{center:n=!1,classes:a,className:o}=e,c=r._objectWithoutPropertiesLoose(e,["center","classes","className"]),[u,p]=X.useState([]),f=X.useRef(0),d=X.useRef(null);X.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[u]);const m=X.useRef(!1),h=X.useRef(null),y=X.useRef(null),b=X.useRef(null);X.useEffect((()=>()=>{clearTimeout(h.current)}),[]);const g=X.useCallback((e=>{const{pulsate:t,rippleX:r,rippleY:s,rippleSize:n,cb:l}=e;p((e=>[...e,X.createElement(i,{key:f.current,classes:a,timeout:550,pulsate:t,rippleX:r,rippleY:s,rippleSize:n})])),f.current+=1,d.current=l}),[a]),k=X.useCallback(((e={},t={},r)=>{const{pulsate:s=!1,center:l=n||t.pulsate,fakeElement:a=!1}=t;if("mousedown"===e.type&&m.current)return void(m.current=!1);"touchstart"===e.type&&(m.current=!0);const o=a?null:b.current,i=o?o.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,p;if(l||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(i.width/2),u=Math.round(i.height/2);else{const{clientX:t,clientY:r}=e.touches?e.touches[0]:e;c=Math.round(t-i.left),u=Math.round(r-i.top)}if(l)p=Math.sqrt((2*i.width**2+i.height**2)/3),p%2==0&&(p+=1);else{const e=2*Math.max(Math.abs((o?o.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((o?o.clientHeight:0)-u),u)+2;p=Math.sqrt(e**2+t**2)}e.touches?null===y.current&&(y.current=()=>{g({pulsate:s,rippleX:c,rippleY:u,rippleSize:p,cb:r})},h.current=setTimeout((()=>{y.current&&(y.current(),y.current=null)}),80)):g({pulsate:s,rippleX:c,rippleY:u,rippleSize:p,cb:r})}),[n,g]),M=X.useCallback((()=>{k({},{pulsate:!0})}),[k]),R=X.useCallback(((e,t)=>{if(clearTimeout(h.current),"touchend"===e.type&&y.current)return e.persist(),y.current(),y.current=null,void(h.current=setTimeout((()=>{R(e,t)})));y.current=null,p((e=>e.length>0?e.slice(1):e)),d.current=t}),[]);return X.useImperativeHandle(s,(()=>({pulsate:M,start:k,stop:R})),[M,k,R]),X.createElement("span",t._extends({className:$.default(a.root,o),ref:b},c),X.createElement(l.TransitionGroup,{component:null,exit:!0},u))}));"production"!==process.env.NODE_ENV&&(L.propTypes={center:Y.default.bool,classes:Y.default.object.isRequired,className:Y.default.string});var D=o(N,{flip:!1,name:"MuiTouchRipple"})(X.memo(L));e.DELAY_RIPPLE=80,e.default=D,e.styles=N,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=TouchRipple.js.map

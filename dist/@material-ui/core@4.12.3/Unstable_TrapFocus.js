define(["react","react-dom","prop-types","./utils/ownerDocument","./utils/useForkRef","@material-ui/utils","./utils/setRef"],(function(e,t,n,r,u,o,c){function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var l=i(e),a=i(t),f=s(n);function d(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:o=!1,disableRestoreFocus:c=!1,getDoc:s,isEnabled:i,open:f}=e,d=l.useRef(),b=l.useRef(null),p=l.useRef(null),E=l.useRef(),v=l.useRef(null),m=l.useCallback((e=>{v.current=a.findDOMNode(e)}),[]),y=u(t.ref,m),R=l.useRef();return l.useEffect((()=>{R.current=f}),[f]),!R.current&&f&&"undefined"!=typeof window&&(E.current=s().activeElement),l.useEffect((()=>{if(!f)return;const e=r(v.current);n||!v.current||v.current.contains(e.activeElement)||(v.current.hasAttribute("tabIndex")||("production"!==process.env.NODE_ENV&&console.error(["Material-UI: The modal content node does not accept focus.",'For the benefit of assistive technologies, the tabIndex of the node is being set to "-1".'].join("\n")),v.current.setAttribute("tabIndex",-1)),v.current.focus());const t=()=>{const{current:t}=v;null!==t&&(e.hasFocus()&&!o&&i()&&!d.current?v.current&&!v.current.contains(e.activeElement)&&v.current.focus():d.current=!1)},u=t=>{!o&&i()&&9===t.keyCode&&e.activeElement===v.current&&(d.current=!0,t.shiftKey?p.current.focus():b.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",u,!0);const s=setInterval((()=>{t()}),50);return()=>{clearInterval(s),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",u,!0),c||(E.current&&E.current.focus&&E.current.focus(),E.current=null)}}),[n,o,c,i,f]),l.createElement(l.Fragment,null,l.createElement("div",{tabIndex:0,ref:b,"data-test":"sentinelStart"}),l.cloneElement(t,{ref:y}),l.createElement("div",{tabIndex:0,ref:p,"data-test":"sentinelEnd"}))}return"production"!==process.env.NODE_ENV&&(d.propTypes={children:f.default.node,disableAutoFocus:f.default.bool,disableEnforceFocus:f.default.bool,disableRestoreFocus:f.default.bool,getDoc:f.default.func.isRequired,isEnabled:f.default.func.isRequired,open:f.default.bool.isRequired}),"production"!==process.env.NODE_ENV&&(d.propTypes=o.exactProp(d.propTypes)),d}));
//# sourceMappingURL=Unstable_TrapFocus.js.map

{"version":3,"file":"container-flow.js","sources":["../../../../node_modules/mdast-util-to-markdown/lib/util/container-flow.js"],"sourcesContent":["/**\n * @typedef {import('../types.js').Node} Node\n * @typedef {import('../types.js').Parent} Parent\n * @typedef {import('../types.js').Join} Join\n * @typedef {import('../types.js').Context} Context\n */\n\n/**\n * @param {Parent} parent\n * @param {Context} context\n * @returns {string}\n */\nexport function containerFlow(parent, context) {\n  const indexStack = context.indexStack\n  const children = parent.children || []\n  /** @type {Array.<string>} */\n  const results = []\n  let index = -1\n\n  indexStack.push(-1)\n\n  while (++index < children.length) {\n    const child = children[index]\n\n    indexStack[indexStack.length - 1] = index\n\n    results.push(\n      context.handle(child, parent, context, {before: '\\n', after: '\\n'})\n    )\n\n    if (child.type !== 'list') {\n      context.bulletLastUsed = undefined\n    }\n\n    if (index < children.length - 1) {\n      results.push(between(child, children[index + 1]))\n    }\n  }\n\n  indexStack.pop()\n\n  return results.join('')\n\n  /**\n   * @param {Node} left\n   * @param {Node} right\n   * @returns {string}\n   */\n  function between(left, right) {\n    let index = context.join.length\n\n    while (index--) {\n      const result = context.join[index](left, right, parent, context)\n\n      if (result === true || result === 1) {\n        break\n      }\n\n      if (typeof result === 'number') {\n        return '\\n'.repeat(1 + result)\n      }\n\n      if (result === false) {\n        return '\\n\\n<!---->\\n\\n'\n      }\n    }\n\n    return '\\n\\n'\n  }\n}\n"],"names":["parent","context","indexStack","children","results","index","push","length","child","handle","before","after","type","bulletLastUsed","undefined","between","pop","join","left","right","result","repeat"],"mappings":"gDAYO,SAAuBA,EAAQC,GACpC,MAAMC,EAAaD,EAAQC,WACrBC,EAAWH,EAAOG,UAAY,GAE9BC,EAAU,GAChB,IAAIC,GAAS,EAIb,IAFAH,EAAWI,MAAM,KAERD,EAAQF,EAASI,QAAQ,CAChC,MAAMC,EAAQL,EAASE,GAEvBH,EAAWA,EAAWK,OAAS,GAAKF,EAEpCD,EAAQE,KACNL,EAAQQ,OAAOD,EAAOR,EAAQC,EAAS,CAACS,OAAQ,KAAMC,MAAO,QAG5C,SAAfH,EAAMI,OACRX,EAAQY,oBAAiBC,GAGvBT,EAAQF,EAASI,OAAS,GAC5BH,EAAQE,KAAKS,EAAQP,EAAOL,EAASE,EAAQ,KAMjD,OAFAH,EAAWc,MAEJZ,EAAQa,KAAK,IAOpB,SAASF,EAAQG,EAAMC,GACrB,IAAId,EAAQJ,EAAQgB,KAAKV,OAEzB,KAAOF,KAAS,CACd,MAAMe,EAASnB,EAAQgB,KAAKZ,GAAOa,EAAMC,EAAOnB,EAAQC,GAExD,IAAe,IAAXmB,GAA8B,IAAXA,EACrB,MAGF,GAAsB,iBAAXA,EACT,MAAO,KAAKC,OAAO,EAAID,GAGzB,IAAe,IAAXA,EACF,MAAO,wBAIX,MAAO"}
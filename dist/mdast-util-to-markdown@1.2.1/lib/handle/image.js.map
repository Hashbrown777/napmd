{"version":3,"file":"image.js","sources":["../../../../node_modules/mdast-util-to-markdown/lib/handle/image.js"],"sourcesContent":["/**\n * @typedef {import('mdast').Image} Image\n * @typedef {import('../types.js').Handle} Handle\n */\n\nimport {checkQuote} from '../util/check-quote.js'\nimport {safe} from '../util/safe.js'\n\nimage.peek = imagePeek\n\n/**\n * @type {Handle}\n * @param {Image} node\n */\nexport function image(node, _, context) {\n  const quote = checkQuote(context)\n  const suffix = quote === '\"' ? 'Quote' : 'Apostrophe'\n  const exit = context.enter('image')\n  let subexit = context.enter('label')\n  let value = '![' + safe(context, node.alt, {before: '[', after: ']'}) + ']('\n\n  subexit()\n\n  if (\n    // If there’s no url but there is a title…\n    (!node.url && node.title) ||\n    // Or if there’s markdown whitespace or an eol, enclose.\n    /[ \\t\\r\\n]/.test(node.url)\n  ) {\n    subexit = context.enter('destinationLiteral')\n    value += '<' + safe(context, node.url, {before: '<', after: '>'}) + '>'\n  } else {\n    // No whitespace, raw is prettier.\n    subexit = context.enter('destinationRaw')\n    value += safe(context, node.url, {\n      before: '(',\n      after: node.title ? ' ' : ')'\n    })\n  }\n\n  subexit()\n\n  if (node.title) {\n    subexit = context.enter('title' + suffix)\n    value +=\n      ' ' +\n      quote +\n      safe(context, node.title, {before: quote, after: quote}) +\n      quote\n    subexit()\n  }\n\n  value += ')'\n  exit()\n\n  return value\n}\n\n/**\n * @type {Handle}\n */\nfunction imagePeek() {\n  return '!'\n}\n"],"names":["image","node","_","context","quote","checkQuote","suffix","exit","enter","subexit","value","safe","alt","before","after","url","title","test","peek"],"mappings":"kIAcO,SAASA,EAAMC,EAAMC,EAAGC,GAC7B,MAAMC,EAAQC,aAAWF,GACnBG,EAAmB,MAAVF,EAAgB,QAAU,aACnCG,EAAOJ,EAAQK,MAAM,SAC3B,IAAIC,EAAUN,EAAQK,MAAM,SACxBE,EAAQ,KAAOC,OAAKR,EAASF,EAAKW,IAAK,CAACC,OAAQ,IAAKC,MAAO,MAAQ,KAoCxE,OAlCAL,KAIIR,EAAKc,KAAOd,EAAKe,OAEnB,YAAYC,KAAKhB,EAAKc,MAEtBN,EAAUN,EAAQK,MAAM,sBACxBE,GAAS,IAAMC,OAAKR,EAASF,EAAKc,IAAK,CAACF,OAAQ,IAAKC,MAAO,MAAQ,MAGpEL,EAAUN,EAAQK,MAAM,kBACxBE,GAASC,OAAKR,EAASF,EAAKc,IAAK,CAC/BF,OAAQ,IACRC,MAAOb,EAAKe,MAAQ,IAAM,OAI9BP,IAEIR,EAAKe,QACPP,EAAUN,EAAQK,MAAM,QAAUF,GAClCI,GACE,IACAN,EACAO,OAAKR,EAASF,EAAKe,MAAO,CAACH,OAAQT,EAAOU,MAAOV,IACjDA,EACFK,KAGFC,GAAS,IACTH,IAEOG,EA/CTV,EAAMkB,KAqDN,WACE,MAAO"}
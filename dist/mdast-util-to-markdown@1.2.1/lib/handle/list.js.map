{"version":3,"file":"list.js","sources":["../../../../node_modules/mdast-util-to-markdown/lib/handle/list.js"],"sourcesContent":["/**\n * @typedef {import('mdast').List} List\n * @typedef {import('../types.js').Handle} Handle\n */\n\nimport {containerFlow} from '../util/container-flow.js'\nimport {checkBullet} from '../util/check-bullet.js'\nimport {checkBulletOther} from '../util/check-bullet-other.js'\nimport {checkBulletOrdered} from '../util/check-bullet-ordered.js'\nimport {checkBulletOrderedOther} from '../util/check-bullet-ordered-other.js'\nimport {checkRule} from '../util/check-rule.js'\n\n/**\n * @type {Handle}\n * @param {List} node\n */\nexport function list(node, parent, context) {\n  const exit = context.enter('list')\n  const bulletCurrent = context.bulletCurrent\n  /** @type {string} */\n  let bullet = node.ordered ? checkBulletOrdered(context) : checkBullet(context)\n  /** @type {string} */\n  const bulletOther = node.ordered\n    ? checkBulletOrderedOther(context)\n    : checkBulletOther(context)\n  const bulletLastUsed = context.bulletLastUsed\n  let useDifferentMarker = false\n\n  if (\n    parent &&\n    // Explicit `other` set.\n    (node.ordered\n      ? context.options.bulletOrderedOther\n      : context.options.bulletOther) &&\n    bulletLastUsed &&\n    bullet === bulletLastUsed\n  ) {\n    useDifferentMarker = true\n  }\n\n  if (!node.ordered) {\n    const firstListItem = node.children ? node.children[0] : undefined\n\n    // If there’s an empty first list item directly in two list items,\n    // we have to use a different bullet:\n    //\n    // ```markdown\n    // * - *\n    // ```\n    //\n    // …because otherwise it would become one big thematic break.\n    if (\n      // Bullet could be used as a thematic break marker:\n      (bullet === '*' || bullet === '-') &&\n      // Empty first list item:\n      firstListItem &&\n      (!firstListItem.children || !firstListItem.children[0]) &&\n      // Directly in two other list items:\n      context.stack[context.stack.length - 1] === 'list' &&\n      context.stack[context.stack.length - 2] === 'listItem' &&\n      context.stack[context.stack.length - 3] === 'list' &&\n      context.stack[context.stack.length - 4] === 'listItem' &&\n      // That are each the first child.\n      context.indexStack[context.indexStack.length - 1] === 0 &&\n      context.indexStack[context.indexStack.length - 2] === 0 &&\n      context.indexStack[context.indexStack.length - 3] === 0 &&\n      context.indexStack[context.indexStack.length - 4] === 0\n    ) {\n      useDifferentMarker = true\n    }\n\n    // If there’s a thematic break at the start of the first list item,\n    // we have to use a different bullet:\n    //\n    // ```markdown\n    // * ---\n    // ```\n    //\n    // …because otherwise it would become one big thematic break.\n    if (checkRule(context) === bullet && firstListItem) {\n      let index = -1\n\n      while (++index < node.children.length) {\n        const item = node.children[index]\n\n        if (\n          item &&\n          item.type === 'listItem' &&\n          item.children &&\n          item.children[0] &&\n          item.children[0].type === 'thematicBreak'\n        ) {\n          useDifferentMarker = true\n          break\n        }\n      }\n    }\n  }\n\n  if (useDifferentMarker) {\n    bullet = bulletOther\n  }\n\n  context.bulletCurrent = bullet\n  const value = containerFlow(node, context)\n  context.bulletLastUsed = bullet\n  context.bulletCurrent = bulletCurrent\n  exit()\n  return value\n}\n"],"names":["node","parent","context","exit","enter","bulletCurrent","bullet","ordered","checkBulletOrdered","checkBullet","bulletOther","checkBulletOrderedOther","checkBulletOther","bulletLastUsed","useDifferentMarker","options","bulletOrderedOther","firstListItem","children","undefined","stack","length","indexStack","checkRule","index","item","type","value","containerFlow"],"mappings":"yNAgBO,SAAcA,EAAMC,EAAQC,GACjC,MAAMC,EAAOD,EAAQE,MAAM,QACrBC,EAAgBH,EAAQG,cAE9B,IAAIC,EAASN,EAAKO,QAAUC,qBAAmBN,GAAWO,cAAYP,GAEtE,MAAMQ,EAAcV,EAAKO,QACrBI,0BAAwBT,GACxBU,mBAAiBV,GACfW,EAAiBX,EAAQW,eAC/B,IAAIC,GAAqB,EAczB,GAXEb,IAECD,EAAKO,QACFL,EAAQa,QAAQC,mBAChBd,EAAQa,QAAQL,cACpBG,GACAP,IAAWO,IAEXC,GAAqB,IAGlBd,EAAKO,QAAS,CACjB,MAAMU,EAAgBjB,EAAKkB,SAAWlB,EAAKkB,SAAS,QAAKC,EAsCzD,GA1Bc,MAAXb,GAA6B,MAAXA,IAEnBW,GACEA,EAAcC,UAAaD,EAAcC,SAAS,IAER,SAA5ChB,EAAQkB,MAAMlB,EAAQkB,MAAMC,OAAS,IACO,aAA5CnB,EAAQkB,MAAMlB,EAAQkB,MAAMC,OAAS,IACO,SAA5CnB,EAAQkB,MAAMlB,EAAQkB,MAAMC,OAAS,IACO,aAA5CnB,EAAQkB,MAAMlB,EAAQkB,MAAMC,OAAS,IAEiB,IAAtDnB,EAAQoB,WAAWpB,EAAQoB,WAAWD,OAAS,IACO,IAAtDnB,EAAQoB,WAAWpB,EAAQoB,WAAWD,OAAS,IACO,IAAtDnB,EAAQoB,WAAWpB,EAAQoB,WAAWD,OAAS,IACO,IAAtDnB,EAAQoB,WAAWpB,EAAQoB,WAAWD,OAAS,KAE/CP,GAAqB,GAWnBS,YAAUrB,KAAaI,GAAUW,EAAe,CAClD,IAAIO,GAAS,EAEb,OAASA,EAAQxB,EAAKkB,SAASG,QAAQ,CACrC,MAAMI,EAAOzB,EAAKkB,SAASM,GAE3B,GACEC,GACc,aAAdA,EAAKC,MACLD,EAAKP,UACLO,EAAKP,SAAS,IACY,kBAA1BO,EAAKP,SAAS,GAAGQ,KACjB,CACAZ,GAAqB,EACrB,SAMJA,IACFR,EAASI,GAGXR,EAAQG,cAAgBC,EACxB,MAAMqB,EAAQC,gBAAc5B,EAAME,GAIlC,OAHAA,EAAQW,eAAiBP,EACzBJ,EAAQG,cAAgBA,EACxBF,IACOwB"}
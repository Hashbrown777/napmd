define(["exports","mdast-util-to-string","micromark/lib/parse.js","micromark/lib/preprocess.js","micromark/lib/postprocess.js","micromark-util-decode-numeric-character-reference","micromark-util-decode-string","micromark-util-normalize-identifier","parse-entities/decode-entity.js","unist-util-stringify-position"],(function(e,t,n,i,r,s,c,a,l,o){const h={}.hasOwnProperty;function u(e,t){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?u(e,i):d(e,i)}return e}function d(e,t){let n;for(n in t)if(h.call(t,n)){const i="canContainEols"===n||"transforms"===n,r=(h.call(e,n)?e[n]:void 0)||(e[n]=i?[]:{}),s=t[n];s&&(i?e[n]=[...r,...s]:Object.assign(r,s))}}e.fromMarkdown=function(e,d,f){return"string"!=typeof d&&(f=d,d=void 0),function(e={}){const n=u({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:g(ue),autolinkProtocol:O,autolinkEmail:O,atxHeading:g(ae),blockQuote:g(ne),characterEscape:O,characterReference:O,codeFenced:g(ie),codeFencedFenceInfo:m,codeFencedFenceMeta:m,codeIndented:g(ie,m),codeText:g(re,m),codeTextData:O,data:O,codeFlowValue:O,definition:g(se),definitionDestinationString:m,definitionLabelString:m,definitionTitleString:m,emphasis:g(ce),hardBreakEscape:g(le),hardBreakTrailing:g(le),htmlFlow:g(oe,m),htmlFlowData:O,htmlText:g(oe,m),htmlTextData:O,image:g(he),label:m,link:g(ue),listItem:g(fe),listItemValue:T,listOrdered:g(de,I),listUnordered:g(de),paragraph:g(pe),reference:K,referenceString:m,resourceDestinationString:m,resourceTitleString:m,setextHeading:g(ae),strong:g(ke),thematicBreak:g(me)},exit:{atxHeading:x(),atxHeadingSequence:H,autolink:x(),autolinkEmail:te,autolinkProtocol:ee,blockQuote:x(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:Y,characterReferenceMarkerNumeric:Y,characterReferenceValue:Z,codeFenced:x(F),codeFencedFence:w,codeFencedFenceInfo:E,codeFencedFenceMeta:v,codeFlowValue:j,codeIndented:x(z),codeText:x(U),codeTextData:j,data:j,definition:x(),definitionDestinationString:R,definitionLabelString:P,definitionTitleString:C,emphasis:x(),hardBreakEscape:x(V),hardBreakTrailing:x(V),htmlFlow:x(_),htmlFlowData:j,htmlText:x(Q),htmlTextData:j,image:x(q),label:W,labelText:A,lineEnding:M,link:x(N),listItem:x(),listOrdered:x(),listUnordered:x(),paragraph:x(),referenceString:X,resourceDestinationString:$,resourceTitleString:G,resource:J,setextHeading:x(L),setextHeadingLineSequence:D,setextHeadingText:B,strong:x(),thematicBreak:x()}},e.mdastExtensions||[]),i={};return r;function r(e){let t={type:"root",children:[]};const i=[],r=[],s={stack:[t],tokenStack:i,config:n,enter:y,exit:S,buffer:m,resume:b,setData:f,getData:p};let c=-1;for(;++c<e.length;)if("listOrdered"===e[c][1].type||"listUnordered"===e[c][1].type)if("enter"===e[c][0])r.push(c);else{c=d(e,r.pop(),c)}for(c=-1;++c<e.length;){const t=n[e[c][0]];h.call(t,e[c][1].type)&&t[e[c][1].type].call(Object.assign({sliceSerialize:e[c][2].sliceSerialize},s),e[c][1])}if(i.length>0)throw new Error("Cannot close document, a token (`"+i[i.length-1].type+"`, "+o.stringifyPosition({start:i[i.length-1].start,end:i[i.length-1].end})+") is still open");for(t.position={start:k(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:k(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},c=-1;++c<n.transforms.length;)t=n.transforms[c](t)||t;return t}function d(e,t,n){let i,r,s,c,a=t-1,l=-1,o=!1;for(;++a<=n;){const t=e[a];if("listUnordered"===t[1].type||"listOrdered"===t[1].type||"blockQuote"===t[1].type?("enter"===t[0]?l++:l--,c=void 0):"lineEndingBlank"===t[1].type?"enter"===t[0]&&(!i||c||l||s||(s=a),c=void 0):"linePrefix"===t[1].type||"listItemValue"===t[1].type||"listItemMarker"===t[1].type||"listItemPrefix"===t[1].type||"listItemPrefixWhitespace"===t[1].type||(c=void 0),!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(i){let c=a;for(r=void 0;c--;){const t=e[c];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;r&&(e[r][1].type="lineEndingBlank",o=!0),t[1].type="lineEnding",r=c}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}s&&(!r||s<r)&&(i._spread=!0),i.end=Object.assign({},r?e[r][1].start:t[1].end),e.splice(r||a,0,["exit",i,t[2]]),a++,n++}"listItemPrefix"===t[1].type&&(i={type:"listItem",_spread:!1,start:Object.assign({},t[1].start)},e.splice(a,0,["enter",i,t[2]]),a++,n++,s=void 0,c=!0)}}return e[t][1]._spread=o,n}function f(e,t){i[e]=t}function p(e){return i[e]}function k(e){return{line:e.line,column:e.column,offset:e.offset}}function g(e,t){return n;function n(n){y.call(this,e(n),n),t&&t.call(this,n)}}function m(){this.stack.push({type:"fragment",children:[]})}function y(e,t){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push(t),e.position={start:k(t.start)},e}function x(e){return t;function t(t){e&&e.call(this,t),S.call(this,t)}}function S(e){const t=this.stack.pop(),n=this.tokenStack.pop();if(!n)throw new Error("Cannot close `"+e.type+"` ("+o.stringifyPosition({start:e.start,end:e.end})+"): itâ€™s not open");if(n.type!==e.type)throw new Error("Cannot close `"+e.type+"` ("+o.stringifyPosition({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+o.stringifyPosition({start:n.start,end:n.end})+") is open");return t.position.end=k(e.end),t}function b(){return t.toString(this.stack.pop())}function I(){f("expectingFirstListItemValue",!0)}function T(e){if(p("expectingFirstListItemValue")){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),f("expectingFirstListItemValue")}}function E(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function v(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function w(){p("flowCodeInside")||(this.buffer(),f("flowCodeInside",!0))}function F(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),f("flowCodeInside")}function z(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function P(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=a.normalizeIdentifier(this.sliceSerialize(e)).toLowerCase()}function C(){const e=this.resume();this.stack[this.stack.length-1].title=e}function R(){const e=this.resume();this.stack[this.stack.length-1].url=e}function H(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function B(){f("setextHeadingSlurpLineEnding",!0)}function D(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2}function L(){f("setextHeadingSlurpLineEnding")}function O(e){const t=this.stack[this.stack.length-1];let n=t.children[t.children.length-1];n&&"text"===n.type||(n=ge(),n.position={start:k(e.start)},t.children.push(n)),this.stack.push(n)}function j(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=k(e.end)}function M(e){const t=this.stack[this.stack.length-1];if(p("atHardBreak")){return t.children[t.children.length-1].position.end=k(e.end),void f("atHardBreak")}!p("setextHeadingSlurpLineEnding")&&n.canContainEols.includes(t.type)&&(O.call(this,e),j.call(this,e))}function V(){f("atHardBreak",!0)}function _(){const e=this.resume();this.stack[this.stack.length-1].value=e}function Q(){const e=this.resume();this.stack[this.stack.length-1].value=e}function U(){const e=this.resume();this.stack[this.stack.length-1].value=e}function N(){const e=this.stack[this.stack.length-1];p("inReference")?(e.type+="Reference",e.referenceType=p("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),f("referenceType")}function q(){const e=this.stack[this.stack.length-1];p("inReference")?(e.type+="Reference",e.referenceType=p("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),f("referenceType")}function A(e){const t=this.stack[this.stack.length-2],n=this.sliceSerialize(e);t.label=c.decodeString(n),t.identifier=a.normalizeIdentifier(n).toLowerCase()}function W(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];f("inReference",!0),"link"===n.type?n.children=e.children:n.alt=t}function $(){const e=this.resume();this.stack[this.stack.length-1].url=e}function G(){const e=this.resume();this.stack[this.stack.length-1].title=e}function J(){f("inReference")}function K(){f("referenceType","collapsed")}function X(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=a.normalizeIdentifier(this.sliceSerialize(e)).toLowerCase(),f("referenceType","full")}function Y(e){f("characterReferenceType",e.type)}function Z(e){const t=this.sliceSerialize(e),n=p("characterReferenceType");let i;n?(i=s.decodeNumericCharacterReference(t,"characterReferenceMarkerNumeric"===n?10:16),f("characterReferenceType")):i=l.decodeEntity(t);const r=this.stack.pop();r.value+=i,r.position.end=k(e.end)}function ee(e){j.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function te(e){j.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function ne(){return{type:"blockquote",children:[]}}function ie(){return{type:"code",lang:null,meta:null,value:""}}function re(){return{type:"inlineCode",value:""}}function se(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ce(){return{type:"emphasis",children:[]}}function ae(){return{type:"heading",depth:void 0,children:[]}}function le(){return{type:"break"}}function oe(){return{type:"html",value:""}}function he(){return{type:"image",title:null,url:"",alt:null}}function ue(){return{type:"link",title:null,url:"",children:[]}}function de(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function fe(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function pe(){return{type:"paragraph",children:[]}}function ke(){return{type:"strong",children:[]}}function ge(){return{type:"text",value:""}}function me(){return{type:"thematicBreak"}}}(f)(r.postprocess(n.parse(f).document().write(i.preprocess()(e,d,!0))))},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=lib.js.map
